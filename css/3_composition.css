@layer composition {
  /* === FLEX PRIMITIVES === */
  [class*="flex:cluster"] { display: flex; flex-wrap: wrap; }
  [class*="flex:stack"] { display: flex; flex-direction: column; }
  
  [class*="flex:split-row"] { display: flex; flex-direction: row; }
  [class*="flex:split-row"] > * { flex: 1; }
  
  [class*="flex:split-column"] { display: flex; flex-direction: column; }
  [class*="flex:split-column"] > * { flex: 1; }
  
  [class*="flex:spread-row"] { display: flex; flex-direction: row; justify-content: space-between; }
  [class*="flex:spread-column"] { display: flex; flex-direction: column; justify-content: space-between; }
  
  [class*="flex:flank-start"] { display: flex; justify-content: flex-start; }
  [class*="flex:flank-end"] { display: flex; justify-content: flex-end; }

  /* === GRID PRIMITIVES === */
  [class*="grid:lcr"] { display: grid; grid-template-columns: auto 1fr auto; }
  [class*="grid:tmb"] { display: grid; grid-template-rows: auto 1fr auto; }
  [class*="grid:pancake"] { display: grid; grid-template-rows: auto 1fr auto; }
  
  [class*="grid:hero-nested"] { display: grid; grid-template: auto 1fr auto / auto 1fr auto; }
  
  [class*="grid:hero-full"] {
    display: grid;
    grid-template: auto 1fr auto / auto 1fr auto;
    min-height: 100svh;
    max-height: 100svh;
    margin: 0;
    overflow: hidden;

    & > nav,
    & > main,
    & > aside {
      overflow-y: auto;
      min-height: 0;
    }
  }
  
  [class*="grid:auto-fit"] {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(var(--grid-min, 250px), 1fr));
  }
  
  [class*="grid:auto-fill"] {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(var(--grid-min, 250px), 1fr));
  }

  /* === FRAME (aspect ratio) === */
  [class*="frame"] { aspect-ratio: 1; overflow: hidden; }
  [class*="frame:landscape"] { aspect-ratio: 16 / 9; }
  [class*="frame:portrait"] { aspect-ratio: 9 / 16; }
  [class*="frame"] > * { width: 100%; height: 100%; object-fit: cover; }
}
